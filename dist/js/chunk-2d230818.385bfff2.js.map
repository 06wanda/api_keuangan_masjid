{"version":3,"sources":["webpack:///./src/views/Pages/Login.vue","webpack:///src/views/Pages/Login.vue","webpack:///./src/views/Pages/Login.vue?4adc","webpack:///./src/views/Pages/Login.vue?6f72"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","ref","scopedSlots","_u","key","fn","_ref","handleSubmit","on","$event","preventDefault","onSubmit","required","min","model","value","username","callback","$$v","$set","expression","password","staticRenderFns","data","methods","_onSubmit","_asyncToGenerator","regeneratorRuntime","mark","_callee","response","userCheck","user","_t","wrap","_context","prev","next","axios","post","withCredentials","sent","status","alert","msg","abrupt","get","localStorage","setItem","role","id_user","$router","replace","console","error","stop","apply","arguments","component"],"mappings":"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","file":"js/chunk-2d230818.385bfff2.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-container\"},[_c('b-container',{staticClass:\"mt-5\"},[_c('b-row',{staticClass:\"justify-content-center\"},[_c('b-col',{attrs:{\"lg\":\"5\",\"md\":\"7\"}},[_c('b-card',{staticClass:\"p-4\"},[_c('h3',{staticClass:\"text-center mb-4\"},[_vm._v(\"Login\")]),_c('validation-observer',{ref:\"formValidator\",scopedSlots:_vm._u([{key:\"default\",fn:function({ handleSubmit }){return [_c('b-form',{on:{\"submit\":function($event){$event.preventDefault();return handleSubmit(_vm.onSubmit)}}},[_c('base-input',{staticClass:\"mb-3\",attrs:{\"name\":\"Username\",\"rules\":{ required: true, min: 4 },\"prepend-icon\":\"ni ni-single-02\",\"placeholder\":\"Username\"},model:{value:(_vm.model.username),callback:function ($$v) {_vm.$set(_vm.model, \"username\", $$v)},expression:\"model.username\"}}),_c('base-input',{staticClass:\"mb-3\",attrs:{\"name\":\"Passwoard\",\"rules\":{ required: true, min: 6 },\"prepend-icon\":\"ni ni-lock-circle-open\",\"type\":\"password\",\"placeholder\":\"Password\"},model:{value:(_vm.model.password),callback:function ($$v) {_vm.$set(_vm.model, \"password\", $$v)},expression:\"model.password\"}}),_c('div',{staticClass:\"text-center\"},[_c('base-button',{attrs:{\"type\":\"primary\",\"native-type\":\"submit\"}},[_vm._v(\"Login\")])],1)],1)]}}])})],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login-container\">\n    <b-container class=\"mt-5\">\n      <b-row class=\"justify-content-center\">\n        <b-col lg=\"5\" md=\"7\">\n          <b-card class=\"p-4\">\n            <h3 class=\"text-center mb-4\">Login</h3>\n            <validation-observer v-slot=\"{ handleSubmit }\" ref=\"formValidator\">\n              <b-form @submit.prevent=\"handleSubmit(onSubmit)\">\n                <base-input\n                  name=\"Username\"\n                  :rules=\"{ required: true, min: 4 }\"\n                  prepend-icon=\"ni ni-single-02\"\n                  placeholder=\"Username\"\n                  v-model=\"model.username\"\n                  class=\"mb-3\"\n                />\n                <base-input\n                  name=\"Passwoard\"\n                  :rules=\"{ required: true, min: 6 }\"\n                  prepend-icon=\"ni ni-lock-circle-open\"\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  v-model=\"model.password\"\n                  class=\"mb-3\"\n                />\n                <div class=\"text-center\">\n                  <base-button type=\"primary\" native-type=\"submit\">Login</base-button>\n                </div>\n              </b-form>\n            </validation-observer>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      model: {\n        username: '',\n        password: ''\n      }\n    };\n  },\n  methods: {\n    async onSubmit() {\n      try {\n       const response = await axios.post(\n  \"https://apikeuanganmasjid-production.up.railway.app/users/login\",\n  this.model,\n  { withCredentials: true } // ✅ wajib untuk kirim cookie session\n);\n\n        if (!response.data.status) {\n          alert(response.data.msg);\n          return;\n        }\n\n        // ✅ Cek session\n       const userCheck = await axios.get(\n  \"https://apikeuanganmasjid-production.up.railway.app/users/check-session\",\n  { withCredentials: true } // ✅ wajib juga\n);\n\n\n        if (userCheck.data.status) {\n          const user = userCheck.data.user;\n          localStorage.setItem(\"role\", user.role);\n          localStorage.setItem(\"userId\", user.id_user);\n\n          if (user.role === \"admin\") {\n            this.$router.replace(\"/dashboardadmin\");\n          } else if (user.role === \"pengurus\") {\n            this.$router.replace(\"/dashboard\");\n          } else {\n            this.$router.replace(\"/laporan-publik\");\n          }\n        }\n      } catch (err) {\n        console.error(\"Login error:\", err);\n        alert(\"Terjadi kesalahan server. Silakan coba lagi.\");\n      }\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=4433e24e\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}