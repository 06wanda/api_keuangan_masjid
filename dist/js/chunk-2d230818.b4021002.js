(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230818"],{ed25:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("b-container",{staticClass:"mt-5"},[t("b-row",{staticClass:"justify-content-center"},[t("b-col",{attrs:{lg:"5",md:"7"}},[t("b-card",{staticClass:"p-4"},[t("h3",{staticClass:"text-center mb-4"},[e._v("Login")]),t("validation-observer",{ref:"formValidator",scopedSlots:e._u([{key:"default",fn:function(a){var r=a.handleSubmit;return[t("b-form",{on:{submit:function(t){return t.preventDefault(),r(e.onSubmit)}}},[t("base-input",{staticClass:"mb-3",attrs:{name:"Username",rules:{required:!0,min:4},"prepend-icon":"ni ni-single-02",placeholder:"Username"},model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}}),t("base-input",{staticClass:"mb-3",attrs:{name:"Password",rules:{required:!0,min:6},"prepend-icon":"ni ni-lock-circle-open",type:"password",placeholder:"Password"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}}),t("div",{staticClass:"text-center"},[t("base-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("Login")])],1)],1)]}}])})],1)],1)],1)],1)],1)},s=[],n=(a("a481"),a("96cf"),a("1da1")),o=a("cee4"),i={data:function(){return{model:{username:"",password:""}}},methods:{onSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,o["a"].post("https://apikeuanganmasjid-production.up.railway.app/users/login",this.model,{withCredentials:!0});case 1:if(t=e.sent,t.data.status){e.next=2;break}return alert(t.data.msg),e.abrupt("return");case 2:return e.next=3,o["a"].get("https://apikeuanganmasjid-production.up.railway.app/users/check-session",{withCredentials:!0});case 3:a=e.sent,a.data.status&&(r=a.data.user,localStorage.setItem("role",r.role),localStorage.setItem("userId",r.id_user),"admin"===r.role?this.$router.replace("/dashboardadmin"):"pengurus"===r.role?this.$router.replace("/dashboard"):this.$router.replace("/laporan-publik")),e.next=5;break;case 4:e.prev=4,s=e["catch"](0),console.error("Login error:",s),alert("Terjadi kesalahan server. Silakan coba lagi.");case 5:case"end":return e.stop()}}),e,this,[[0,4]])})));function t(){return e.apply(this,arguments)}return t}()}},l=i,u=a("2877"),c=Object(u["a"])(l,r,s,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d230818.b4021002.js.map