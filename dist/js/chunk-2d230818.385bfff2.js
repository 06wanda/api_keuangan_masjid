(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d230818"],{ed25:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e._self._c;return a("div",{staticClass:"login-container"},[a("b-container",{staticClass:"mt-5"},[a("b-row",{staticClass:"justify-content-center"},[a("b-col",{attrs:{lg:"5",md:"7"}},[a("b-card",{staticClass:"p-4"},[a("h3",{staticClass:"text-center mb-4"},[e._v("Login")]),a("validation-observer",{ref:"formValidator",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.handleSubmit;return[a("b-form",{on:{submit:function(a){return a.preventDefault(),r(e.onSubmit)}}},[a("base-input",{staticClass:"mb-3",attrs:{name:"Username",rules:{required:!0,min:4},"prepend-icon":"ni ni-single-02",placeholder:"Username"},model:{value:e.model.username,callback:function(a){e.$set(e.model,"username",a)},expression:"model.username"}}),a("base-input",{staticClass:"mb-3",attrs:{name:"Passwoard",rules:{required:!0,min:6},"prepend-icon":"ni ni-lock-circle-open",type:"password",placeholder:"Password"},model:{value:e.model.password,callback:function(a){e.$set(e.model,"password",a)},expression:"model.password"}}),a("div",{staticClass:"text-center"},[a("base-button",{attrs:{type:"primary","native-type":"submit"}},[e._v("Login")])],1)],1)]}}])})],1)],1)],1)],1)],1)},s=[],n=(t("a481"),t("96cf"),t("1da1")),o=t("cee4"),i={data:function(){return{model:{username:"",password:""}}},methods:{onSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var a,t,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=1,o["a"].post("https://apikeuanganmasjid-production.up.railway.app/users/login",this.model,{withCredentials:!0});case 1:if(a=e.sent,a.data.status){e.next=2;break}return alert(a.data.msg),e.abrupt("return");case 2:return e.next=3,o["a"].get("https://apikeuanganmasjid-production.up.railway.app/users/check-session",{withCredentials:!0});case 3:t=e.sent,t.data.status&&(r=t.data.user,localStorage.setItem("role",r.role),localStorage.setItem("userId",r.id_user),"admin"===r.role?this.$router.replace("/dashboardadmin"):"pengurus"===r.role?this.$router.replace("/dashboard"):this.$router.replace("/laporan-publik")),e.next=5;break;case 4:e.prev=4,s=e["catch"](0),console.error("Login error:",s),alert("Terjadi kesalahan server. Silakan coba lagi.");case 5:case"end":return e.stop()}}),e,this,[[0,4]])})));function a(){return e.apply(this,arguments)}return a}()}},l=i,u=t("2877"),c=Object(u["a"])(l,r,s,!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d230818.385bfff2.js.map