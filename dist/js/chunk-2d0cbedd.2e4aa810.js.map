{"version":3,"sources":["webpack:///./src/views/Pengurus/EditTransaksi.vue","webpack:///src/views/Pengurus/EditTransaksi.vue","webpack:///./src/views/Pengurus/EditTransaksi.vue?1eb2","webpack:///./src/views/Pengurus/EditTransaksi.vue?155b"],"names":["render","_vm","this","_c","_self","staticClass","_v","on","$event","preventDefault","updateTransaksi","apply","arguments","directives","name","rawName","value","form","jenis_transaksi","expression","attrs","domProps","_q","$set","tanggal_transaksi","target","composing","nominal","modifiers","_n","$forceUpdate","keterangan","buktiPreview","staticStyle","_e","ref","handleFileUpload","staticRenderFns","data","bukti","mounted","fetchData","methods","_fetchData","_asyncToGenerator","regeneratorRuntime","mark","_callee","id","res","_t","wrap","_context","prev","next","$route","params","id_transaksi","axios","get","concat","sent","status","slice","alert","console","error","stop","event","files","URL","createObjectURL","_updateTransaksi","_callee2","formData","_t2","_context2","FormData","append","put","headers","$router","push","component"],"mappings":"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","file":"js/chunk-2d0cbedd.2e4aa810.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container mt-4\"},[_c('h2',[_vm._v(\"Edit Transaksi\")]),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.updateTransaksi.apply(null, arguments)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Jenis Transaksi\")]),_c('br'),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.jenis_transaksi),expression:\"form.jenis_transaksi\"}],attrs:{\"type\":\"radio\",\"value\":\"Pemasukan\",\"required\":\"\"},domProps:{\"checked\":_vm._q(_vm.form.jenis_transaksi,\"Pemasukan\")},on:{\"change\":function($event){return _vm.$set(_vm.form, \"jenis_transaksi\", \"Pemasukan\")}}}),_vm._v(\" Pemasukan\")]),_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.jenis_transaksi),expression:\"form.jenis_transaksi\"}],attrs:{\"type\":\"radio\",\"value\":\"Pengeluaran\",\"required\":\"\"},domProps:{\"checked\":_vm._q(_vm.form.jenis_transaksi,\"Pengeluaran\")},on:{\"change\":function($event){return _vm.$set(_vm.form, \"jenis_transaksi\", \"Pengeluaran\")}}}),_vm._v(\" Pengeluaran\")])]),_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Tanggal\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.tanggal_transaksi),expression:\"form.tanggal_transaksi\"}],staticClass:\"form-control\",attrs:{\"type\":\"date\",\"required\":\"\"},domProps:{\"value\":(_vm.form.tanggal_transaksi)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"tanggal_transaksi\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Nominal (Rp)\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.nominal),expression:\"form.nominal\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"min\":\"1\",\"required\":\"\"},domProps:{\"value\":(_vm.form.nominal)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"nominal\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Keterangan\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.keterangan),expression:\"form.keterangan\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"required\":\"\"},domProps:{\"value\":(_vm.form.keterangan)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"keterangan\", $event.target.value)}}})]),(_vm.buktiPreview)?_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Preview Bukti:\")]),_c('br'),_c('img',{staticStyle:{\"max-width\":\"200px\",\"border\":\"1px solid #ccc\"},attrs:{\"src\":_vm.buktiPreview,\"alt\":\"Bukti\"}})]):_vm._e(),_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"Ganti Bukti (opsional)\")]),_c('input',{ref:\"fileInput\",attrs:{\"type\":\"file\",\"accept\":\"image/*\"},on:{\"change\":_vm.handleFileUpload}})]),_c('button',{staticClass:\"btn btn-warning\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Update Transaksi\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container mt-4\">\r\n    <h2>Edit Transaksi</h2>\r\n\r\n    <form @submit.prevent=\"updateTransaksi\">\r\n      <div class=\"form-group\">\r\n        <label>Jenis Transaksi</label><br />\r\n        <label><input type=\"radio\" value=\"Pemasukan\" v-model=\"form.jenis_transaksi\" required /> Pemasukan</label>\r\n        <label><input type=\"radio\" value=\"Pengeluaran\" v-model=\"form.jenis_transaksi\" required /> Pengeluaran</label>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Tanggal</label>\r\n        <input type=\"date\" v-model=\"form.tanggal_transaksi\" class=\"form-control\" required />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Nominal (Rp)</label>\r\n        <input type=\"number\" v-model.number=\"form.nominal\" min=\"1\" class=\"form-control\" required />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>Keterangan</label>\r\n        <input type=\"text\" v-model=\"form.keterangan\" class=\"form-control\" required />\r\n      </div>\r\n\r\n      <!-- ✅ Preview Gambar Lama -->\r\n      <div class=\"form-group\" v-if=\"buktiPreview\">\r\n        <label>Preview Bukti:</label><br />\r\n        <img :src=\"buktiPreview\" alt=\"Bukti\" style=\"max-width: 200px; border: 1px solid #ccc;\" />\r\n      </div>\r\n\r\n      <!-- ✅ Upload Gambar Baru (opsional) -->\r\n      <div class=\"form-group\">\r\n        <label>Ganti Bukti (opsional)</label>\r\n        <input type=\"file\" @change=\"handleFileUpload\" accept=\"image/*\" ref=\"fileInput\" />\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-warning\">Update Transaksi</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        jenis_transaksi: '',\r\n        tanggal_transaksi: '',\r\n        nominal: null,\r\n        keterangan: ''\r\n      },\r\n      bukti: null,\r\n      buktiPreview: null\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchData()\r\n  },\r\n  methods: {\r\n    async fetchData() {\r\n      const id = this.$route.params.id_transaksi\r\n      try {\r\n        const res = await axios.get(`https://apikeuanganmasjid-production.up.railway.app/get-data/${id}`)\r\n        if (res.data.status) {\r\n          const data = res.data.data\r\n          this.form = {\r\n            jenis_transaksi: data.jenis_transaksi,\r\n            tanggal_transaksi: data.tanggal_transaksi.slice(0,10),\r\n            nominal: data.nominal,\r\n            keterangan: data.keterangan\r\n          }\r\n\r\n          // ✅ Tampilkan gambar dari backend\r\n          if (data.bukti) {\r\n            this.buktiPreview = `https://apikeuanganmasjid-production.up.railway.app/img/${data.bukti}` // sesuai path backend\r\n          }\r\n        } else {\r\n          alert('Data tidak ditemukan')\r\n        }\r\n      } catch (error) {\r\n        console.error(error)\r\n        alert('Gagal mengambil data transaksi')\r\n      }\r\n    },\r\n\r\n    handleFileUpload(event) {\r\n      this.bukti = event.target.files[0]\r\n\r\n      // ✅ Tampilkan preview gambar baru jika di-upload\r\n      if (this.bukti) {\r\n        this.buktiPreview = URL.createObjectURL(this.bukti)\r\n      }\r\n    },\r\n\r\n    async updateTransaksi() {\r\n      const id = this.$route.params.id_transaksi\r\n      const formData = new FormData()\r\n      formData.append('jenis_transaksi', this.form.jenis_transaksi)\r\n      formData.append('tanggal_transaksi', this.form.tanggal_transaksi)\r\n      formData.append('nominal', this.form.nominal)\r\n      formData.append('keterangan', this.form.keterangan)\r\n\r\n      if (this.bukti) {\r\n        formData.append('bukti', this.bukti)\r\n      }\r\n\r\n      try {\r\n        await axios.put(`https://apikeuanganmasjid-production.up.railway.app/data_keuangan/update-transaksi/${id}`, formData, {\r\n          headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n        alert('Data berhasil diupdate!')\r\n        this.$router.push('/datatransaksi')\r\n      } catch (error) {\r\n        console.error('Gagal update:', error)\r\n        alert('Gagal mengupdate data')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditTransaksi.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditTransaksi.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EditTransaksi.vue?vue&type=template&id=4365461a\"\nimport script from \"./EditTransaksi.vue?vue&type=script&lang=js\"\nexport * from \"./EditTransaksi.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}